# 学生管理系统 - 启动指南

## 📋 环境要求

### 后端环境
- **JDK**: 17 或更高版本
- **Maven**: 3.6+ (项目已包含 Maven Wrapper)
- **MySQL**: 8.0+ 
- **IDE**: IntelliJ IDEA / Eclipse / VS Code (可选)

### 前端环境
- **Node.js**: 16.0+ (推荐 18+)
- **npm**: 9.0+ 或 **yarn**: 1.22+ 或 **pnpm**: 7.0+

### 检查环境版本
```bash
# 检查 Java 版本
java -version

# 检查 Maven 版本（如果已安装）
mvn -version

# 检查 Node.js 版本
node -v

# 检查 npm 版本
npm -v
```

---

## 🗄️ 第一步：数据库准备

### 1.1 创建数据库

**方式一：执行 SQL 脚本（推荐）**

```bash
# 使用 MySQL 命令行客户端
mysql -u root -p < src/main/resources/db/schema.sql
```

**方式二：手动创建**

1. 打开 MySQL 客户端（MySQL Workbench、Navicat 等）
2. 执行以下 SQL：

```sql
CREATE DATABASE IF NOT EXISTS student_management 
DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;

USE student_management;

-- 然后执行 src/main/resources/db/schema.sql 中的所有建表语句
```

### 1.2 配置数据库连接

编辑 `src/main/resources/application.properties`，修改数据库连接信息：

```properties
# 根据你的实际情况修改
spring.datasource.url=jdbc:mysql://localhost:3306/student_management?useUnicode=true&characterEncoding=utf8&useSSL=false&serverTimezone=Asia/Shanghai
spring.datasource.username=root          # 修改为你的MySQL用户名
spring.datasource.password=your_password  # 修改为你的MySQL密码
```

**注意事项：**
- 确保 MySQL 服务已启动
- 确保端口 3306 没有被占用
- 如果 MySQL 端口不是 3306，需要修改 URL 中的端口号

---

## 🚀 第二步：启动后端（Spring Boot）

### 方式一：使用 Maven Wrapper（推荐，无需安装 Maven）

**Windows 系统：**
```bash
# 在项目根目录执行
mvnw.cmd spring-boot:run
```

**Linux / Mac 系统：**
```bash
# 在项目根目录执行
./mvnw spring-boot:run
```

### 方式二：使用已安装的 Maven

```bash
# 在项目根目录执行
mvn spring-boot:run
```

### 方式三：使用 IDE 启动（IntelliJ IDEA / Eclipse）

**IntelliJ IDEA：**
1. 打开项目
2. 找到 `src/main/java/com/example/studentmanagementsystem/StudentManagementSystemApplication.java`
3. 右键点击 → Run 'StudentManagementSystemApplication'
4. 或者点击右上角的运行按钮 ▶️

**Eclipse：**
1. 右键项目 → Run As → Spring Boot App

### 验证后端启动成功

看到以下日志表示启动成功：
```
Started StudentManagementSystemApplication in X.XXX seconds
```

后端服务地址：**http://localhost:8080**

可以访问以下地址测试：
- http://localhost:8080/api/students (应该返回空列表或错误，这是正常的)

---

## 🎨 第三步：启动前端（Vue 3）

### 3.1 安装依赖

```bash
# 进入前端目录
cd frontend

# 使用 npm 安装依赖
npm install

# 或使用 yarn
yarn install

# 或使用 pnpm（推荐，速度更快）
pnpm install
```

### 3.2 启动开发服务器

```bash
# 在 frontend 目录下执行
npm run dev

# 或使用 yarn
yarn dev

# 或使用 pnpm
pnpm dev
```

### 验证前端启动成功

看到以下信息表示启动成功：
```
  VITE v5.x.x  ready in xxx ms

  ➜  Local:   http://localhost:3000/
  ➜  Network: use --host to expose
```

前端服务地址：**http://localhost:3000**

### 3.3 浏览器访问

打开浏览器，访问：**http://localhost:3000**

你应该能看到学生管理系统的界面。

---

## ✅ 验证系统运行

### 1. 检查后端 API

在浏览器或 Postman 中访问：
```
GET http://localhost:8080/api/students?pageNumber=1&pageSize=10
```

应该返回 JSON 格式的响应：
```json
{
  "code": 200,
  "msg": "操作成功",
  "data": {
    "records": [],
    "total": 0,
    "pageNumber": 1,
    "pageSize": 10
  }
}
```

### 2. 检查前端页面

1. 打开 http://localhost:3000
2. 应该看到左侧菜单：学生管理、课程管理、成绩管理
3. 点击"学生管理"，应该能看到空列表（如果数据库中没有数据）

### 3. 测试完整流程

1. 在前端页面点击"新增学生"
2. 填写表单并提交
3. 检查列表是否显示新添加的学生
4. 测试编辑和删除功能

---

## 🔧 常见问题排查

### 问题1：后端启动失败 - 数据库连接错误

**错误信息：**
```
Communications link failure
```

**解决方法：**
1. 检查 MySQL 服务是否启动
2. 检查 `application.properties` 中的数据库连接信息是否正确
3. 检查防火墙是否阻止了连接

### 问题2：后端启动失败 - 端口被占用

**错误信息：**
```
Port 8080 was already in use
```

**解决方法：**
```bash
# Windows: 查找占用端口的进程
netstat -ano | findstr :8080
taskkill /PID <进程ID> /F

# Linux/Mac: 查找占用端口的进程
lsof -i :8080
kill -9 <进程ID>

# 或者修改 application.properties 中的端口
server.port=8081
```

### 问题3：前端启动失败 - 依赖安装失败

**解决方法：**
```bash
# 清除缓存并重新安装
rm -rf node_modules package-lock.json
npm cache clean --force
npm install
```

### 问题4：前端无法连接后端 API

**解决方法：**
1. 确认后端服务已启动（http://localhost:8080）
2. 检查 `frontend/src/utils/request.js` 中的 `baseURL` 配置
3. 检查浏览器控制台是否有 CORS 错误
4. 确认 `vite.config.js` 中的代理配置正确

### 问题5：数据库表不存在

**解决方法：**
1. 确认已执行数据库初始化脚本
2. 检查数据库名称是否正确
3. 手动执行 `src/main/resources/db/schema.sql` 中的 SQL 语句

---

## 📝 开发命令速查

### 后端命令

```bash
# 启动应用
mvnw spring-boot:run          # Linux/Mac
mvnw.cmd spring-boot:run      # Windows

# 编译项目
mvnw clean compile            # Linux/Mac
mvnw.cmd clean compile         # Windows

# 打包项目
mvnw clean package            # Linux/Mac
mvnw.cmd clean package        # Windows

# 运行测试
mvnw test                     # Linux/Mac
mvnw.cmd test                 # Windows
```

### 前端命令

```bash
# 开发模式启动（热更新）
npm run dev

# 生产环境构建
npm run build

# 预览生产构建
npm run preview
```

---

## 🎯 下一步

系统启动成功后，你可以：

1. **添加测试数据**：在前端界面手动添加一些学生、课程和成绩数据
2. **测试功能**：验证 CRUD 操作是否正常
3. **查看日志**：后端控制台会输出 SQL 日志，便于调试
4. **扩展功能**：根据需求添加新功能模块

---

## 📞 需要帮助？

如果遇到问题，请检查：
1. 所有环境依赖是否已正确安装
2. 数据库是否已创建并配置正确
3. 端口是否被占用
4. 浏览器控制台是否有错误信息
5. 后端控制台是否有错误日志

祝开发愉快！🎉
